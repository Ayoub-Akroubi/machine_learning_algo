{% extends "base.html" %}

{% block content %}
<h2>Apply Algorithms</h2>

{% if message %}
    <p>{{ message }}</p>
{% endif %}

{% if data_ready %}
    <h3>Statistics</h3>
    {% if statistics %}
        <div>{{ statistics|safe }}</div>
    {% else %}
        <p>Calculating statistics...</p>
    {% endif %}
    
    <form method="post">
        {% csrf_token %}
        <button type="submit" name="linear_regression">Apply Linear Regression</button>
        <button type="submit" name="svr">Apply Support Vector Regression</button>
    </form>
{% else %}
    <form method="post">
        {% csrf_token %}
        <button type="submit" name="preprocess">Preprocess Data</button>
    </form>
{% endif %}

{% if plot %}
    <h3>{{ algorithm }}</h3>
    <img src="data:image/png;base64,{{ plot }}">
    <p>RÂ² Score: {{ r2 }}</p>
{% endif %}

{% endblock %}
